import{_ as n,c as a,a as l,V as s,o as p}from"./chunks/framework.2c88e6e5.js";const o="/flame-blog/img/platform/szm_card.png",e="/flame-blog/img/platform/szm_http_utils.png",t="/flame-blog/img/platform/szm_old_logs.png",d=JSON.parse('{"title":"8583老版本项目问题","description":"","frontmatter":{},"headers":[],"relativePath":"platform/szm/old8583.md","filePath":"platform/szm/old8583.md"}'),r={name:"platform/szm/old8583.md"},c=s(`<h1 id="_8583老版本项目问题" tabindex="-1">8583老版本项目问题 <a class="header-anchor" href="#_8583老版本项目问题" aria-label="Permalink to &quot;8583老版本项目问题&quot;">​</a></h1><h2 id="transtoken让终端取本地" tabindex="-1">transToken让终端取本地 <a class="header-anchor" href="#transtoken让终端取本地" aria-label="Permalink to &quot;transToken让终端取本地&quot;">​</a></h2><p>很多老项目终端在获取token时还是去服务端获取，通过<strong>MgrTransferService</strong>如下接口去获取，在遇到项目改造的时候，同时让终端去取终端本地token，但是我们的token获取接口不要删除。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RouteProxyResponse</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transToken</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">RouteProxyRequest</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">throws AppBizException</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="transtoken校验及获取" tabindex="-1">transToken校验及获取 <a class="header-anchor" href="#transtoken校验及获取" aria-label="Permalink to &quot;transToken校验及获取&quot;">​</a></h2><ol><li>考虑transToken的获取方式修改为同终端逻辑</li></ol><ul><li>获取token</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//获取token</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RouteProxyResponse</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transToken</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">RouteProxyRequest</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">throws AppBizException</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RouteProxyResponse</span><span style="color:#A6ACCD;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RouteProxyResponse</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">TransToken</span><span style="color:#A6ACCD;"> transToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TransToken</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">UUID</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">randomUUID</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">replace</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setRespDetail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transToken</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>token生成</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//token生成</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TransToken</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AbstractSimpleRedisSerializable</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Serializable</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;">RedisSerializable</span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> serialVersionUID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5582842076957242367L</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> transToken</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//交易令牌</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> timestamp</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//时间戳</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TransToken</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">transToken</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">transToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  System</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">currentTimeMillis</span><span style="color:#89DDFF;">()+</span><span style="color:#A6ACCD;">transToken</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">timestamp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> System</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">currentTimeMillis</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>删除交易中判断transToken存在有效期内的逻辑； <strong>各类交易中删除下面的判断代码</strong>：</li></ol><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> isExipre </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">transTokenIsExpire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transToken</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">isExipre</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AppRTException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AppExCode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SESSION_EXIPRE</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">401 unauthorized</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="调用转发-修改调用逻辑" tabindex="-1">调用转发，修改调用逻辑 <a class="header-anchor" href="#调用转发-修改调用逻辑" aria-label="Permalink to &quot;调用转发，修改调用逻辑&quot;">​</a></h2><p>在调用转发模块时，修改调用逻辑，使用6023或者6024端口。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">TRANS_ADDRESS_N</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://10.0.151.100:6024/xposp-route/online/transProxy/</span></span>
<span class="line"><span style="color:#A6ACCD;">TRANS_ADDRESS_S</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://10.0.151.100:6023/xposp-route/online/transProxy/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>调用转发(RouteServiceImpl)：</strong></li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">TransProxyResponse</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doTransProxy</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TransProxyRequest</span><span style="color:#A6ACCD;"> transProxyRequest</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws AppBizException</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setVersion</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setRouteId</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">routeId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setChnId</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">getChnId</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> calcReqMacHex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CodecUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hexString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MacUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tCountMAC_ECB</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">CodecUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hex2byte</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">routeKey</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">macData</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#A6ACCD;">    transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setMac</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">calcReqMacHex</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> transURL  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    transURL</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getTransUrl</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInstNo</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transURL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Null</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AppBizException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AppExCode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CHANNEL_NOT_EXIST</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">instNo is null</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transURL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AppBizException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AppExCode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CHANNEL_NOT_EXIST</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">instNo is wrong</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        transURL</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> transURL </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> transProxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInstNo</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> responseMsg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ChannelUtil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">proxySendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transURL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> JSONObject</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromObject</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transProxyRequest</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">TransProxyResponse</span><span style="color:#A6ACCD;"> transProxyResponse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">TransProxyResponse</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> JSONObject</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBean</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">JSONObject</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromObject</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">responseMsg</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> TransProxyResponse</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> transProxyResponse</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><strong>transUrl获取：</strong></li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Value</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${TRANS_ADDRESS_N}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> transUrl_N</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Value</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${TRANS_ADDRESS_S}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> transUrl_S</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getTransUrl</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> deptCode</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> url</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">StringUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isBlank</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deptCode</span><span style="color:#89DDFF;">)){</span></span>
<span class="line"><span style="color:#A6ACCD;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Null</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">RouteUtil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSouthSet</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deptCode</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> transUrl_S</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">RouteUtil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getNorthSet</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deptCode</span><span style="color:#89DDFF;">)){</span></span>
<span class="line"><span style="color:#A6ACCD;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> transUrl_N</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> url</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li><strong>RouteUtil机构合集：</strong> xpospChannelServiceContext.xml配置文件中</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">bean</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routeUtil</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.ums.xposp.utils.RouteUtil</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">lazy-init</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">property</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">southSet</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">102000</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">100800</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">           ......</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">property</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">northSet</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">103400</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">100000</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            ......</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">bean</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="交易金额调用工具类" tabindex="-1">交易金额调用工具类 <a class="header-anchor" href="#交易金额调用工具类" aria-label="Permalink to &quot;交易金额调用工具类&quot;">​</a></h2><p>在ConsumeProcess进行金额转换打包unpack时，调用转换工具类，老版本中可能存在调用：</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">StringUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">amtToBCD</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAmount</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>这个是错误的方法，存在bug,应该使用XpospDataUtils工具,XpospDataUtils.amountToBCD(request.getAmount())。</p></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ConsumeTradeRequestEntity</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">packUp</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TerminalInfo</span><span style="color:#A6ACCD;"> cupsTrmnl</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">DeviceInfo</span><span style="color:#A6ACCD;"> device</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">ChannelRequestInfo</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">throws TransferFailedException</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">AppBizException</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//消费报文打包</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//{2,3,4,11,22,25,26,35,36,41,42,49,52,53,60,64}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">ConsumeTradeRequestEntity</span><span style="color:#A6ACCD;"> entity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConsumeTradeRequestEntity</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">......</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//	entity.setTransAmt(StringUtils.amtToBCD(request.getAmount()));</span></span>
<span class="line"><span style="color:#A6ACCD;">    entity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setTransAmt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">XpospDataUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">amountToBCD</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAmount</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">......</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="使用工具获取卡号" tabindex="-1">使用工具获取卡号 <a class="header-anchor" href="#使用工具获取卡号" aria-label="Permalink to &quot;使用工具获取卡号&quot;">​</a></h2><p>在银行卡消费(BankTransferChannel)获取卡号时，使用工具类BankCardUtils进行卡号的获取</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//如果二磁道、三磁道信息为空，则取终端上送的卡号</span></span>
<span class="line"><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> cardNo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> BankCardUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCardNo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTrack2data</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTrack3data</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCardNo</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">requestInfo</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCardNo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">cardNo</span><span style="color:#89DDFF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注意三磁道中的判断逻辑，很多老版本中工具的三磁获取有写错如下：修改为<code>idx = track3.indexOf(&#39;d&#39;);</code></p></div><img src="`+o+`" data-fancybox="gallery"><h2 id="消费交易更新渠道流水时保存38域授权码" tabindex="-1">消费交易更新渠道流水时保存38域授权码 <a class="header-anchor" href="#消费交易更新渠道流水时保存38域授权码" aria-label="Permalink to &quot;消费交易更新渠道流水时保存38域授权码&quot;">​</a></h2><p>如果有38域返回需要保存，未保存撤销交易则会报错。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 授权码</span></span>
<span class="line"><span style="color:#A6ACCD;">chnFlowInfoUpdateRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAuthCode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">responseEntity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAuthCode</span><span style="color:#89DDFF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="撤销交易上送38域授权码" tabindex="-1">撤销交易上送38域授权码 <a class="header-anchor" href="#撤销交易上送38域授权码" aria-label="Permalink to &quot;撤销交易上送38域授权码&quot;">​</a></h2><p>缴费交易更新渠道流水时保存38域授权码</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 缴费交易返回更新授权码</span></span>
<span class="line"><span style="color:#A6ACCD;">chnFlowInfoUpdateRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAuthCode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">responseEntity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAuthCode</span><span style="color:#89DDFF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果缴费返回了38域授权码，撤销没有上送会报错。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 撤销组包送38预授权码</span></span>
<span class="line"><span style="color:#A6ACCD;">entity</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAuthCode</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">originalPayCups</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAuthCode</span><span style="color:#89DDFF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="第三方调用校验需设置packname" tabindex="-1">第三方调用校验需设置packName <a class="header-anchor" href="#第三方调用校验需设置packname" aria-label="Permalink to &quot;第三方调用校验需设置packName&quot;">​</a></h2><p>终端送extOrderNo或者送了extBillNo就属于第三方调用，会进行校验appid和packName</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">JSONObject</span><span style="color:#A6ACCD;"> appPackageName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> JSONObject</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromObject</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAppInfo</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">paymentRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAppPackageName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">XPOSPClientUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">appPackageName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//2.业务处理</span></span>
<span class="line"><span style="color:#C792EA;">PaymentInfo</span><span style="color:#A6ACCD;"> payment </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> transferService</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pay</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">paymentRequest</span><span style="color:#89DDFF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="httputil工具更新" tabindex="-1">HttpUtil工具更新 <a class="header-anchor" href="#httputil工具更新" aria-label="Permalink to &quot;HttpUtil工具更新&quot;">​</a></h2><p>异常时或者响应吗非200时，需要添加method.abort()，否则会导致服务器存在大量time_wait。 <img src="`+e+'" data-fancybox="gallery"></p><h2 id="修改日志格式" tabindex="-1">修改日志格式 <a class="header-anchor" href="#修改日志格式" aria-label="Permalink to &quot;修改日志格式&quot;">​</a></h2><p>以前的日志格式：</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">%d [%x] %t [%-5p] (%F,%L) - %m%n</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><img src="'+t+'" data-fancybox="gallery">',48),D=s('<div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ}|%-5p|%t||%X{_traceId}||%X{_leftTraceId}|%c|%m[LID=[%X{_leftTraceId}],ID=[%X{_traceId}],RID=[%X{_rightTraceId}]]%n</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',1);function y(F,i,A,C,u,b){return p(),a("div",null,[c,l(" 修改为如下日志格式： "),D])}const h=n(r,[["render",y]]);export{d as __pageData,h as default};
