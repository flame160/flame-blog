import{_ as s,c as a,o as n,V as l}from"./chunks/framework.2c88e6e5.js";const F=JSON.parse('{"title":"多渠道号项目获取渠道号逻辑","description":"","frontmatter":{},"headers":[],"relativePath":"platform/szm/multiple-chnid.md","filePath":"platform/szm/multiple-chnid.md"}'),e={name:"platform/szm/multiple-chnid.md"},p=l(`<h1 id="多渠道号项目获取渠道号逻辑" tabindex="-1">多渠道号项目获取渠道号逻辑 <a class="header-anchor" href="#多渠道号项目获取渠道号逻辑" aria-label="Permalink to &quot;多渠道号项目获取渠道号逻辑&quot;">​</a></h1><h2 id="_1-删除原全局变量chnid" tabindex="-1">1. 删除原全局变量chnId <a class="header-anchor" href="#_1-删除原全局变量chnid" aria-label="Permalink to &quot;1. 删除原全局变量chnId&quot;">​</a></h2><p>RouteServiceImpl中删除注解@Value(&quot;\${chnId}&quot;)。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routeService</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RouteServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RouteService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Logger</span><span style="color:#A6ACCD;"> logger </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> LoggerFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLogger</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">RouteServiceImpl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//@Value(&quot;\${chnId}&quot;)  //删除改注解</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> chnId</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_2-删除给全局变量赋值的方法" tabindex="-1">2. 删除给全局变量赋值的方法 <a class="header-anchor" href="#_2-删除给全局变量赋值的方法" aria-label="Permalink to &quot;2. 删除给全局变量赋值的方法&quot;">​</a></h2><p>ChannelProxyServiceImpl中删除给全局变量赋值的方法。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">routeService</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setRequestChnId</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">proxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getChnId</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">innerRouteService</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setRequestChnId</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">proxyRequest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getChnId</span><span style="color:#89DDFF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-转发调用方法添加局部变量chnid" tabindex="-1">3. 转发调用方法添加局部变量chnId <a class="header-anchor" href="#_3-转发调用方法添加局部变量chnid" aria-label="Permalink to &quot;3. 转发调用方法添加局部变量chnId&quot;">​</a></h2><p>InnerRouteServiceImpl和RouteServiceImpl类转发调用方法添加局部变量chnId。<strong>注意：是所有方法</strong>，以updateChnflowInfo为例。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">updateChnflowInfo</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ChnFlowInfoUpdateRequest</span><span style="color:#A6ACCD;"> chnFlowInfoUpdateRequest</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> chnId</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">throws AppBizException </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">......</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//2.webservice交易</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">TransProxyResponse</span><span style="color:#A6ACCD;"> transProxyResponse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">doTransProxy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">transProxyRequest</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">chnId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">......</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_4-各类交易中调用方法传终端上送chnid" tabindex="-1">4. 各类交易中调用方法传终端上送chnId <a class="header-anchor" href="#_4-各类交易中调用方法传终端上送chnid" aria-label="Permalink to &quot;4. 各类交易中调用方法传终端上送chnId&quot;">​</a></h2><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">innerRouteService</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">updateChnflowInfo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">chnFlowInfoUpdateRequest</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cupsTrmnl</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getChnId</span><span style="color:#89DDFF;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,12),o=[p];function r(t,c,i,y,D,C){return n(),a("div",null,o)}const d=s(e,[["render",r]]);export{F as __pageData,d as default};
